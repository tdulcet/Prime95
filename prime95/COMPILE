# Standard options
masm=ml /c /coff
#masm=ml /c /coff /Fl /Sf /Sa
masm64=ml64 /c
#masm64=ml64 /c /Fl /Sf /Sa
cl=\msdev\bin\cl /I.. /I C:\msdev\include\ /O2 /GF /W3 /MT /c
#cl=\msdev\bin\cl /I.. /I C:\msdev\include\ /O2 /GF /W3 /MT /Zi /c

# Create 32-bit executables

mult.obj: mult.asm mult.mac xmult.mac timeit.inc
    $(masm) mult.asm

mult1.obj: mult1.asm mult.mac
    $(masm) mult1.asm

mult1p.obj: mult1.asm mult.mac
    $(masm) /DPPRO /Fomult1p.obj mult1.asm

mult1aux.obj: mult1aux.asm mult.mac normal.mac
    $(masm) mult1aux.asm

mult2.obj: mult2.asm mult.mac
    $(masm) mult2.asm

mult2p.obj: mult2.asm mult.mac
    $(masm) /DPPRO /Fomult2p.obj mult2.asm

mult2a.obj: mult2a.asm mult.mac
    $(masm) mult2a.asm

mult2ap.obj: mult2a.asm mult.mac
    $(masm) /DPPRO /Fomult2ap.obj mult2a.asm

mult2aux.obj: mult2aux.asm mult.mac normal.mac
    $(masm) mult2aux.asm

mult3.obj: mult3.asm mult.mac fft2b.mac
    $(masm) mult3.asm

mult3p.obj: mult3.asm mult.mac fft2b.mac
    $(masm) /DPPRO /Fomult3p.obj mult3.asm

mult3q.obj: mult3.asm mult.mac fft2b.mac
    $(masm) /DPPRO /DPFETCH /Fomult3q.obj mult3.asm

mult3a.obj: mult3a.asm mult.mac
    $(masm) mult3a.asm

mult3ap.obj: mult3a.asm mult.mac
    $(masm) /DPPRO /Fomult3ap.obj mult3a.asm

mult3aq.obj: mult3a.asm mult.mac
    $(masm) /DPPRO /DPFETCH /Fomult3aq.obj mult3a.asm

mult3aux.obj: mult3aux.asm mult.mac normal.mac
    $(masm) mult3aux.asm

mult3auq.obj: mult3aux.asm mult.mac normal.mac
    $(masm) /DPPRO /DPFETCH /Fomult3auq.obj mult3aux.asm

mult4.obj: mult4.asm mult.mac fft3.mac
    $(masm) mult4.asm

mult4p.obj: mult4.asm mult.mac fft3.mac
    $(masm) /DPPRO /Fomult4p.obj mult4.asm

mult4q.obj: mult4.asm mult.mac fft3.mac
    $(masm) /DPPRO /DPFETCH /Fomult4q.obj mult4.asm

mult4a.obj: mult4a.asm mult.mac
    $(masm) mult4a.asm

mult4ap.obj: mult4a.asm mult.mac
    $(masm) /DPPRO /Fomult4ap.obj mult4a.asm

mult4aq.obj: mult4a.asm mult.mac
    $(masm) /DPPRO /DPFETCH /Fomult4aq.obj mult4a.asm

mult4b.obj: mult4b.asm mult.mac
    $(masm) mult4b.asm

mult4bp.obj: mult4b.asm mult.mac
    $(masm) /DPPRO /Fomult4bp.obj mult4b.asm

mult4bq.obj: mult4b.asm mult.mac
    $(masm) /DPPRO /DPFETCH /Fomult4bq.obj mult4b.asm

mult4aux.obj: mult4aux.asm mult.mac normal.mac
    $(masm) mult4aux.asm

mult4auq.obj: mult4aux.asm mult.mac normal.mac
    $(masm) /DPPRO /DPFETCH /Fomult4auq.obj mult4aux.asm

ecmhelp.obj: ecmhelp.asm
    $(masm) ecmhelp.asm

cpuid.obj: cpuid.asm
    $(masm) cpuid.asm

factor64.obj: factor64.asm
    $(masm) factor64.asm

dummy4.obj: dummy4.asm
    $(masm) dummy4.asm

dummy8.obj: dummy8.asm
    $(masm) dummy8.asm

dummy12.obj: dummy12.asm
    $(masm) dummy12.asm

dummy16.obj: dummy16.asm
    $(masm) dummy16.asm

dummy20.obj: dummy20.asm
    $(masm) dummy20.asm

dummy24.obj: dummy24.asm
    $(masm) dummy24.asm

dummy28.obj: dummy28.asm
    $(masm) dummy28.asm

dummyt4.obj: dummyt4.asm
    $(masm) dummyt4.asm

dummyt8.obj: dummyt8.asm
    $(masm) dummyt8.asm

dummyt12.obj: dummyt12.asm
    $(masm) dummyt12.asm

dummyt16.obj: dummyt16.asm
    $(masm) dummyt16.asm

dummyt20.obj: dummyt20.asm
    $(masm) dummyt20.asm

dummyt24.obj: dummyt24.asm
    $(masm) dummyt24.asm

dummyt28.obj: dummyt28.asm
    $(masm) dummyt28.asm

xmult1.obj: xmult1.asm xmult.mac xlucas.mac xfft1.mac
    $(masm) xmult1.asm

xmult1ax.obj: xmult1ax.asm xmult.mac xnormal.mac
    $(masm) xmult1ax.asm

xmult2.obj: xmult2.asm xmult.mac xlucas.mac xfft2.mac
    $(masm) xmult2.asm

xmult2a.obj: xmult2a.asm xmult.mac xpass2.mac xlucas.mac
    $(masm) xmult2a.asm

xmult2ax.obj: xmult2ax.asm xmult.mac xnormal.mac
    $(masm) xmult2ax.asm

xmult3.obj: xmult3.asm xmult.mac xlucas.mac xfft3.mac
    $(masm) xmult3.asm

xmult3a.obj: xmult3a.asm xmult.mac xpass2.mac xlucas.mac
    $(masm) xmult3a.asm

xmult3ax.obj: xmult3ax.asm xmult.mac xnormal.mac
    $(masm) xmult3ax.asm

# Create optimized giants.obj

giants.obj: ..\giants.c ..\giants.h
    $(cl) giants.cpp

# Compile special services code

service.obj: service.c
    $(cl) service.c

